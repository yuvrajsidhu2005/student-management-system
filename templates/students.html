{% extends 'base.html' %}

{% block content %}
<h2>ğŸ‘¥ Student Records</h2>

<!-- Search and Filter Section -->
<div class="search-section">
    <form method="GET" action="{{ url_for('students') }}" class="search-form">
        <input type="text" name="search" placeholder="ğŸ” Search by Name, Email or ID..." value="{{ search }}" class="search-input">
        <select name="course" class="filter-select">
            <option value="">All Courses</option>
            <option value="BE" {% if course_filter == 'BE' %}selected{% endif %}>BE</option>
            <option value="BCA" {% if course_filter == 'BCA' %}selected{% endif %}>BCA</option>
        </select>
        <button type="submit" class="search-btn">Search</button>
        <a href="{{ url_for('students') }}" class="reset-btn">Clear</a>
    </form>
</div>

<!-- Add Student Form -->
<div class="add-form">
    <h3>â• Add New Student</h3>
    <form method="POST" action="{{ url_for('add_student') }}">
        <input type="text" name="name" placeholder="Full Name" required>
        <input type="email" name="email" placeholder="Email Address" required>
        <select name="course" required>
            <option value="">Select Course</option>
            <option value="BE">BE (Bachelor of Engineering)</option>
            <option value="BCA">BCA (Bachelor of Computer Applications)</option>
        </select>
        <input type="number" name="year" placeholder="Year (1-4)" min="1" max="4" required>
        <button type="submit">Add Student</button>
    </form>
</div>

<!-- Students Table -->
<table class="data-table">
    <thead>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Email</th>
            <th>Course</th>
            <th>Year</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for student in students %}
        <tr>
            <td>{{ student['StudentID'] }}</td>
            <td>{{ student['Name'] }}</td>
            <td>{{ student['Email'] }}</td>
            <td><span class="course-badge">{{ student['Course'] }}</span></td>
            <td>{{ student['Year'] }}</td>
            <td class="action-buttons">
                <a href="{{ url_for('edit_student', id=student['StudentID']) }}" class="btn-edit">âœï¸ Edit</a>
                <a href="{{ url_for('delete_student', id=student['StudentID']) }}" 
                   class="btn-delete" 
                   onclick="return confirm('Are you sure you want to delete {{ student['Name'] }}?')">ğŸ—‘ï¸ Delete</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% if students|length == 0 %}
<p class="no-data">No students found. Try a different search or add new students.</p>
{% endif %}

{% endblock %}
